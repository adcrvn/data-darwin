# Copy this file to terraform.tfvars and update with your values
# cp terraform.tfvars.example terraform.tfvars

# AWS Configuration
aws_region = "us-east-1"
environment = "prod"
project_name = "smarthome-radar"

# Network Configuration
vpc_cidr = "10.0.0.0/16"
availability_zones = ["us-east-1a", "us-east-1b"]  # ALB requires 2 AZs minimum

# Compute Configuration
instance_type = "t3.small"  # Options: t3.micro, t3.small, t3.medium

# Auto Scaling Configuration
asg_min_size = 1
asg_max_size = 1
asg_desired_capacity = 1

# ECR Configuration
ecr_repository_name = "smarthome-radar-api"
container_image_tag = "latest"

# Health Check
health_check_path = "/api/healthz"

# SSL Certificate (optional)
# Uncomment and add your ACM certificate ARN for HTTPS
# ssl_certificate_arn = "arn:aws:acm:us-east-1:123456789012:certificate/12345678-1234-1234-1234-123456789012"

# Security (optional)
# Restrict access to specific IP ranges
# allowed_cidr_blocks = ["1.2.3.4/32", "5.6.7.8/32"]
allowed_cidr_blocks = ["0.0.0.0/0"]

# ==================== RDS Database Configuration ====================

# Database Name and Credentials
db_name            = "smarthome_api"
db_master_username = "postgres"

# IMPORTANT: Use environment variable instead of hardcoding password
# export TF_VAR_db_master_password="YourSecurePassword123!"
# Or use AWS Secrets Manager for production
# db_master_password = ""  # DO NOT commit password here!

# Engine Configuration
db_engine_version = "16.1"  # PostgreSQL version

# Instance Class
# Development: db.t3.micro (~$13/month)
# Staging:     db.t3.small (~$26/month)
# Production:  db.t3.medium (~$52/month) or db.r6g.large (~$144/month)
db_instance_class = "db.t3.micro"

# Storage Configuration
db_allocated_storage     = 20   # Initial storage in GB
db_max_allocated_storage = 100  # Max storage for autoscaling (0 to disable)
db_storage_encrypted     = true # Keep true for security

# High Availability (recommended for production)
# Note: Multi-AZ approximately doubles the cost
db_multi_az = false  # Set to true for production

# Backup Configuration
db_backup_retention_period = 7     # Days to retain backups (0-35)
db_skip_final_snapshot     = false # Set to true for dev/testing only

# Monitoring (additional costs apply)
db_performance_insights_enabled = false # Set to true for production troubleshooting
db_monitoring_interval          = 0     # 0, 1, 5, 10, 15, 30, or 60 seconds

# Protection
db_deletion_protection = true # Keep true for production

# Read Replica (optional - for read-heavy workloads)
db_create_read_replica = false

# ==================== Environment-Specific Examples ====================
# Uncomment the appropriate section for your environment:

# --- DEVELOPMENT ---
# db_instance_class               = "db.t3.micro"
# db_allocated_storage            = 20
# db_multi_az                     = false
# db_deletion_protection          = false
# db_skip_final_snapshot          = true
# db_backup_retention_period      = 1
# db_performance_insights_enabled = false
# db_monitoring_interval          = 0
# Estimated cost: ~$15-20/month

# --- STAGING ---
# db_instance_class               = "db.t3.small"
# db_allocated_storage            = 30
# db_multi_az                     = false
# db_deletion_protection          = true
# db_skip_final_snapshot          = false
# db_backup_retention_period      = 3
# db_performance_insights_enabled = false
# db_monitoring_interval          = 0
# Estimated cost: ~$35-45/month

# --- PRODUCTION ---
# db_instance_class               = "db.t3.medium"
# db_allocated_storage            = 100
# db_multi_az                     = true
# db_deletion_protection          = true
# db_skip_final_snapshot          = false
# db_backup_retention_period      = 7
# db_performance_insights_enabled = true
# db_monitoring_interval          = 60
# Estimated cost: ~$120-150/month
